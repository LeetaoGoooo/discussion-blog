<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Using Keyboard Shortcuts in Flutter Desktop - Leetao</title>
    <meta name="description" content="# Intro

Using keyboard shortcuts in desktop is a common case, it can boost our productivity when used correctly. In flutter, there&#39;re two ways for us to buil...">
    
    <link rel="icon" href="/favicon.svg" type="image/x-icon">
    
    <link rel="stylesheet" href="/styles/main.css">
    <link rel="stylesheet" href="/styles/chroma.css">
    <link rel="alternate" type="application/rss+xml" href="/rss.xml" title="RSS Feed">
</head>
<body class="container">
    <header class="site-header">
        <div class="site-header__left">
            <a href="/" class="site-title">Leetao</a>
            
            <p class="site-description">写有趣的代码，做有趣的事</p>
            
        </div>
        <div class="site-header__right">
            <nav class="site-nav">
                <a href="/">Home</a>
                <a href="/tags/">Tags</a>
                <a href="/about/">About</a>
                <a class="feed-link" href="/rss.xml" title="RSS Feed">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M4 11a9 9 0 0 1 9 9"></path>
                        <path d="M4 4a16 16 0 0 1 16 16"></path>
                        <circle cx="5" cy="19" r="1"></circle>
                    </svg>
                </a>
                <button class="theme-toggle" id="theme-toggle">
                    <svg class="theme-icon" viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                </button>
            </nav>
        </div>
    </header>
    
    <main>
        <article class="post">
            <header class="post-header">
                <h1 class="post-title">Using Keyboard Shortcuts in Flutter Desktop</h1>
                <p class="post-meta">
                    By LeetaoGoooo on July 15, 2023
                </p>
            </header>
            
            <div class="post-content">
                <h1 id="intro">Intro</h1>

<p>Using keyboard shortcuts in desktop is a common case, it can boost our productivity when used correctly. In flutter, there're two ways for us to build keyboard shortcuts in desktop app. One is <a href="https://api.flutter.dev/flutter/widgets/RawKeyboardListener-class.html">RawKeyboardListener</a>  and the another is <a href="https://api.flutter-io.cn/flutter/widgets/Shortcuts-class.html">Shortcuts</a>, but they have significant differences.</p>

<h1 id="rawkeyboardlistener">RawKeyboardListener</h1>

<blockquote>
<p>A <a href="https://api.flutter.dev/flutter/widgets/RawKeyboardListener-class.html">RawKeyboardListener</a> is useful for listening to raw key events and hardware buttons that are represented as keys. Typically used by games and other apps that use keyboards for purposes other than text entry.<br />
It allows you to listen to &quot;key-up&quot; and &quot;key-down&quot; events on the keyboard</p>
</blockquote>
<pre class="chroma"><code><span class="line"><span class="cl">  <span class="err">@</span><span class="n">override</span>
</span></span><span class="line"><span class="cl">   <span class="n">Widget</span> <span class="n">build</span><span class="p">(</span><span class="n">BuildContext</span> <span class="n">context</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">     <span class="k">return</span> <span class="n">KeyboardListener</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">         <span class="nl">autofocus:</span> <span class="kc">true</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">         <span class="nl">onKeyEvent:</span> <span class="p">(</span><span class="n">event</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">           <span class="k">if</span> <span class="p">(</span><span class="n">event</span><span class="p">.</span><span class="n">runtimeType</span> <span class="o">=</span><span class="o">=</span> <span class="n">RawKeyDownEvent</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">           <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">             
</span></span><span class="line"><span class="cl">           <span class="p">}</span>
</span></span><span class="line"><span class="cl">         <span class="p">}</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">         <span class="nl">focusNode:</span> <span class="n">FocusNode</span><span class="p">(</span><span class="p">)</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">         <span class="nl">child:</span> <span class="n">child</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="p">)</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">   <span class="p">}</span>
</span></span></code></pre>
<p>Undoubtedly, we can use this widget to implement keyboard shortcuts. But in reality, it's a bit complex, and most of the time, we don't want to filter keydown events.</p>

<p>More importantly, if you want to use shortcuts with <a href="https://github.com/google/flutter-desktop-embedding/tree/master/plugins/menubar">menu bar plugin</a>, you will need to use <code>LogicalKeySet</code>, while <code>RawKeyboardListener</code> is not based on this.</p>

<p>Moreover, RawKeyboardListener may not work as expected sometimes, for example, when you have to deal with hotkeys with modifiers Ctrl or Alt. Code may like this:</p>
<pre class="chroma"><code><span class="line"><span class="cl">  <span class="n">RawKeyboardListener</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">          <span class="nl">autofocus:</span> <span class="kc">true</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">          <span class="nl">onKey:</span> <span class="p">(</span><span class="n">event</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="p">(</span><span class="n">event</span><span class="p">.</span><span class="n">runtimeType</span> <span class="o">=</span><span class="o">=</span> <span class="n">RawKeyDownEvent</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">               <span class="n">print</span><span class="p">(</span><span class="n">event</span><span class="p">.</span><span class="n">logicalKey</span><span class="p">)</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">              <span class="k">if</span> <span class="p">(</span><span class="n">event</span><span class="p">.</span><span class="n">isKeyPressed</span><span class="p">(</span><span class="n">LogicalKeyboardKey</span><span class="p">.</span><span class="n">control</span><span class="p">)</span> <span class="o">&amp;</span><span class="o">&amp;</span>
</span></span><span class="line"><span class="cl">                  <span class="n">event</span><span class="p">.</span><span class="n">isKeyPressed</span><span class="p">(</span><span class="n">LogicalKeyboardKey</span><span class="p">.</span><span class="n">keyC</span><span class="p">)</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">_incrementCounter</span><span class="p">(</span><span class="p">)</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">              <span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">          <span class="p">}</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">          <span class="nl">focusNode:</span> <span class="n">FocusNode</span><span class="p">(</span><span class="p">)</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">          <span class="nl">child:</span> <span class="n">child</span>
</span></span><span class="line"><span class="cl">    <span class="p">)</span>
</span></span></code></pre>
<p>But actually, <code>event.logicalKey</code> will print <code>Control Left</code> or  <code>Control Right</code> and <code>event.isKeyPressed(LogicalKeyboardKey.control)</code> will <strong>never</strong> return <code>true</code>. For that purpose, you need to recorrect code like:</p>
<pre class="chroma"><code><span class="line"><span class="cl">  <span class="p">.</span><span class="p">.</span><span class="p">.</span>  
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="p">(</span><span class="p">(</span><span class="n">event</span><span class="p">.</span><span class="n">isKeyPressed</span><span class="p">(</span><span class="n">LogicalKeyboardKey</span><span class="p">.</span><span class="n">controlLeft</span><span class="p">)</span> <span class="o">|</span><span class="o">|</span>  <span class="n">event</span><span class="p">.</span><span class="n">isKeyPressed</span><span class="p">(</span><span class="n">LogicalKeyboardKey</span><span class="p">.</span><span class="n">controlLeft</span><span class="p">)</span> <span class="o">&amp;</span><span class="o">&amp;</span>
</span></span><span class="line"><span class="cl">                  <span class="n">event</span><span class="p">.</span><span class="n">isKeyPressed</span><span class="p">(</span><span class="n">LogicalKeyboardKey</span><span class="p">.</span><span class="n">keyC</span><span class="p">)</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">_incrementCounter</span><span class="p">(</span><span class="p">)</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">              <span class="p">}</span>
</span></span></code></pre>
<p>Therefore, if you want to use keyboard shortcuts in desktop applications built using Flutter, you should consider the <a href="https://api.flutter.dev/flutter/widgets/Shortcuts-class.html">Shortcuts</a> widget. It's a simpler and more convenient way to create keyboard shortcuts in Flutter.</p>

<h1 id="shortcuts">Shortcuts</h1>

<blockquote>
<p>A widget that creates key bindings to specific actions for its descendants. See the article on <a href="https://docs.flutter.cn/development/ui/advanced/actions_and_shortcuts">Using Actions and Shortcuts</a> for a detailed explanation.<br />
It takes in a map of <strong>shortcuts</strong> (LogicalKeySet: Intent), and <strong>actions</strong> (Intent: Action).</p>
</blockquote>

<h2 id="intents-and-actions">Intents and Actions</h2>

<p>An intent always represents particular configuration of an <a href="https://api.flutter-io.cn/flutter/widgets/Action-class.html">Action</a>. Take the example of a desktop with a keyboard shortcuts that Increase/decrease. An intent for this would like this:</p>
<pre class="chroma"><code><span class="line"><span class="cl">  <span class="kd">class</span> <span class="nc">IncrementIntent</span> <span class="kd">extends</span> <span class="n">Intent</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">const</span> <span class="n">IncrementIntent</span><span class="p">(</span><span class="p">)</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl">  <span class="kd">class</span> <span class="nc">DecrementIntent</span> <span class="kd">extends</span> <span class="n">Intent</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">const</span> <span class="n">DecrementIntent</span><span class="p">(</span><span class="p">)</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">  
</span></span></code></pre>
<p>And what action does, it will do something once an Intent is received. In our copy example, an action for the intent would look like this:</p>
<pre class="chroma"><code><span class="line"><span class="cl">  <span class="n">Actions</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">          <span class="nl">actions:</span> <span class="o">&lt;</span><span class="n">Type</span><span class="p">,</span> <span class="n">Action</span><span class="o">&lt;</span><span class="n">Intent</span><span class="o">&gt;</span><span class="o">&gt;</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nl">IncrementIntent:</span> <span class="n">CallbackAction</span><span class="o">&lt;</span><span class="n">IncrementIntent</span><span class="o">&gt;</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">              <span class="nl">onInvoke:</span> <span class="p">(</span><span class="n">IncrementIntent</span> <span class="n">intent</span><span class="p">)</span> <span class="o">=</span><span class="o">&gt;</span> <span class="n">setState</span><span class="p">(</span><span class="p">(</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">count</span> <span class="o">=</span> <span class="n">count</span> <span class="o">+</span> <span class="m">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">              <span class="p">}</span><span class="p">)</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="p">)</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="nl">DecrementIntent:</span> <span class="n">CallbackAction</span><span class="o">&lt;</span><span class="n">DecrementIntent</span><span class="o">&gt;</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">              <span class="nl">onInvoke:</span> <span class="p">(</span><span class="n">DecrementIntent</span> <span class="n">intent</span><span class="p">)</span> <span class="o">=</span><span class="o">&gt;</span> <span class="n">setState</span><span class="p">(</span><span class="p">(</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">count</span> <span class="o">=</span> <span class="n">count</span> <span class="o">-</span> <span class="m">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">              <span class="p">}</span><span class="p">)</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="p">)</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">          <span class="p">}</span>
</span></span></code></pre>
<p>You can define different types of actions and intents for different scenarios.</p>

<h2 id="example-using-shortcuts">Example Using Shortcuts</h2>

<p>source code comes from <a href="https://api.flutter-io.cn/flutter/widgets/Shortcuts-class.html">Shortcuts  Class</a></p>
<pre class="chroma"><code><span class="line"><span class="cl">  <span class="k">import</span> <span class="s1">&#39;</span><span class="s1">package:flutter/material.dart</span><span class="s1">&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="k">import</span> <span class="s1">&#39;</span><span class="s1">package:flutter/services.dart</span><span class="s1">&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl">  <span class="c1">/// Flutter code sample for [Shortcuts].
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  
</span></span><span class="line"><span class="cl">  <span class="kt">void</span> <span class="n">main</span><span class="p">(</span><span class="p">)</span> <span class="o">=</span><span class="o">&gt;</span> <span class="n">runApp</span><span class="p">(</span><span class="kd">const</span> <span class="n">ShortcutsExampleApp</span><span class="p">(</span><span class="p">)</span><span class="p">)</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl">  <span class="kd">class</span> <span class="nc">ShortcutsExampleApp</span> <span class="kd">extends</span> <span class="n">StatelessWidget</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">const</span> <span class="n">ShortcutsExampleApp</span><span class="p">(</span><span class="p">{</span><span class="k">super</span><span class="p">.</span><span class="n">key</span><span class="p">}</span><span class="p">)</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl">    <span class="err">@</span><span class="n">override</span>
</span></span><span class="line"><span class="cl">    <span class="n">Widget</span> <span class="n">build</span><span class="p">(</span><span class="n">BuildContext</span> <span class="n">context</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="k">return</span> <span class="n">MaterialApp</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">        <span class="nl">home:</span> <span class="n">Scaffold</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">          <span class="nl">appBar:</span> <span class="n">AppBar</span><span class="p">(</span><span class="nl">title:</span> <span class="kd">const</span> <span class="n">Text</span><span class="p">(</span><span class="s1">&#39;</span><span class="s1">Shortcuts Sample</span><span class="s1">&#39;</span><span class="p">)</span><span class="p">)</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">          <span class="nl">body:</span> <span class="kd">const</span> <span class="n">Center</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">            <span class="nl">child:</span> <span class="n">ShortcutsExample</span><span class="p">(</span><span class="p">)</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">          <span class="p">)</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="p">)</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="p">)</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl">  <span class="kd">class</span> <span class="nc">IncrementIntent</span> <span class="kd">extends</span> <span class="n">Intent</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">const</span> <span class="n">IncrementIntent</span><span class="p">(</span><span class="p">)</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl">  <span class="kd">class</span> <span class="nc">DecrementIntent</span> <span class="kd">extends</span> <span class="n">Intent</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">const</span> <span class="n">DecrementIntent</span><span class="p">(</span><span class="p">)</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl">  <span class="kd">class</span> <span class="nc">ShortcutsExample</span> <span class="kd">extends</span> <span class="n">StatefulWidget</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kd">const</span> <span class="n">ShortcutsExample</span><span class="p">(</span><span class="p">{</span><span class="k">super</span><span class="p">.</span><span class="n">key</span><span class="p">}</span><span class="p">)</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl">    <span class="err">@</span><span class="n">override</span>
</span></span><span class="line"><span class="cl">    <span class="n">State</span><span class="o">&lt;</span><span class="n">ShortcutsExample</span><span class="o">&gt;</span> <span class="n">createState</span><span class="p">(</span><span class="p">)</span> <span class="o">=</span><span class="o">&gt;</span> <span class="n">_ShortcutsExampleState</span><span class="p">(</span><span class="p">)</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl">  <span class="kd">class</span> <span class="nc">_ShortcutsExampleState</span> <span class="kd">extends</span> <span class="n">State</span><span class="o">&lt;</span><span class="n">ShortcutsExample</span><span class="o">&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kt">int</span> <span class="n">count</span> <span class="o">=</span> <span class="m">0</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  
</span></span><span class="line"><span class="cl">    <span class="err">@</span><span class="n">override</span>
</span></span><span class="line"><span class="cl">    <span class="n">Widget</span> <span class="n">build</span><span class="p">(</span><span class="n">BuildContext</span> <span class="n">context</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="k">return</span> <span class="n">Shortcuts</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">        <span class="nl">shortcuts:</span> <span class="kd">const</span> <span class="o">&lt;</span><span class="n">ShortcutActivator</span><span class="p">,</span> <span class="n">Intent</span><span class="o">&gt;</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">          <span class="n">SingleActivator</span><span class="p">(</span><span class="n">LogicalKeyboardKey</span><span class="p">.</span><span class="n">arrowUp</span><span class="p">)</span><span class="o">:</span> <span class="n">IncrementIntent</span><span class="p">(</span><span class="p">)</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">          <span class="n">SingleActivator</span><span class="p">(</span><span class="n">LogicalKeyboardKey</span><span class="p">.</span><span class="n">arrowDown</span><span class="p">)</span><span class="o">:</span> <span class="n">DecrementIntent</span><span class="p">(</span><span class="p">)</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nl">child:</span> <span class="n">Actions</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">          <span class="nl">actions:</span> <span class="o">&lt;</span><span class="n">Type</span><span class="p">,</span> <span class="n">Action</span><span class="o">&lt;</span><span class="n">Intent</span><span class="o">&gt;</span><span class="o">&gt;</span><span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="nl">IncrementIntent:</span> <span class="n">CallbackAction</span><span class="o">&lt;</span><span class="n">IncrementIntent</span><span class="o">&gt;</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">              <span class="nl">onInvoke:</span> <span class="p">(</span><span class="n">IncrementIntent</span> <span class="n">intent</span><span class="p">)</span> <span class="o">=</span><span class="o">&gt;</span> <span class="n">setState</span><span class="p">(</span><span class="p">(</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">count</span> <span class="o">=</span> <span class="n">count</span> <span class="o">+</span> <span class="m">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">              <span class="p">}</span><span class="p">)</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="p">)</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="nl">DecrementIntent:</span> <span class="n">CallbackAction</span><span class="o">&lt;</span><span class="n">DecrementIntent</span><span class="o">&gt;</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">              <span class="nl">onInvoke:</span> <span class="p">(</span><span class="n">DecrementIntent</span> <span class="n">intent</span><span class="p">)</span> <span class="o">=</span><span class="o">&gt;</span> <span class="n">setState</span><span class="p">(</span><span class="p">(</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="n">count</span> <span class="o">=</span> <span class="n">count</span> <span class="o">-</span> <span class="m">1</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">              <span class="p">}</span><span class="p">)</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="p">)</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">          <span class="p">}</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">          <span class="nl">child:</span> <span class="n">Focus</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">            <span class="nl">autofocus:</span> <span class="kc">true</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="nl">child:</span> <span class="n">Column</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">              <span class="nl">children:</span> <span class="o">&lt;</span><span class="n">Widget</span><span class="o">&gt;</span><span class="p">[</span>
</span></span><span class="line"><span class="cl">                <span class="kd">const</span> <span class="n">Text</span><span class="p">(</span><span class="s1">&#39;</span><span class="s1">Add to the counter by pressing the up arrow key</span><span class="s1">&#39;</span><span class="p">)</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                <span class="kd">const</span> <span class="n">Text</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">                    <span class="s1">&#39;</span><span class="s1">Subtract from the counter by pressing the down arrow key</span><span class="s1">&#39;</span><span class="p">)</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                <span class="n">Text</span><span class="p">(</span><span class="s1">&#39;</span><span class="s1">count: </span><span class="si">$</span><span class="n">count</span><span class="s1">&#39;</span><span class="p">)</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">              <span class="p">]</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="p">)</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">          <span class="p">)</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="p">)</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="p">)</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">  
</span></span></code></pre>
<h1 id="rawkeyboardlistener-vs-shortcuts">RawKeyboardListener vs Shortcuts</h1>

<p>In summary, RawKeyboardListener is more powerful than Shortcuts, it can listen all keyboard event, include &quot;key-up&quot; and &quot;key-down&quot; events, among others.  However, this also means RawKeyboardListener is more complex than Shortcuts. On the other hand, Shortcuts is easier to use and make code  clearer. After all, you define all the action and intent at first.</p>

<h1 id="reference">Reference</h1>

<ul>
<li><a href="https://wilsonwilson.dev/articles/keyboard-shortcuts-in-flutter">Using Keyboard Shortcuts in Flutter Desktop</a></li>
<li><a href="https://medium.com/@syazwan03nasir/flutter-how-to-use-rawkeyboardlistener-widget-6fb177918f29">Flutter: How To Use RawKeyboardListener Widget</a></li>
<li><a href="https://api.flutter.dev/flutter/widgets/RawKeyboardListener-class.html">RawKeyboardListener</a></li>
<li><a href="https://api.flutter-io.cn/flutter/widgets/Action-class.html">Action</a></li>
<li><a href="https://api.flutter-io.cn/flutter/widgets/Shortcuts-class.html">Shortcuts</a></li>
</ul>

            </div>
            
            <div class="tag-list">
                
                <a href="/tags/dart/" class="tag">dart</a>
                
                <a href="/tags/flutter/" class="tag">flutter</a>
                
            </div>
            
            <div class="giscus">
                <script src="https://giscus.app/client.js"
                    data-repo="leetaogoooo/discussion-blog"
                    data-repo-id="R_kgDOIOm9Yg"
                    data-mapping="number"
                    data-term="20"
                    data-reactions-enabled="1"
                    data-emit-metadata="0"
                    data-input-position="top"
                    data-theme="preferred_color_scheme"
                    data-lang="en"
                    crossorigin="anonymous"
                    async>
                </script>
            </div>
            
        </article>
        
        <nav class="post-navigation">
            
            <a href="/post/19/" class="nav-btn prev-post">
                &larr; sealed class in dart
            </a>
            
            
            
            <a href="/post/23/" class="nav-btn next-post">
                配合Github Actions 做一个自动推送的 Rss 订阅机器人 &rarr;
            </a>
            
        </nav>
    </main>
    
    <footer>
        <p>&copy; Leetao. All rights reserved.</p>
    </footer>
    
    <script src="/js/theme-toggle.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            
            const giscusScript = document.querySelector('script[src^="https://giscus.app/client.js"]');
            const setGiscusTheme = (theme) => {
                if (giscusScript) {
                    const message = { setConfig: { theme: theme } };
                    const iframe = document.querySelector('.giscus-frame');
                    if (iframe) {
                        iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
                    }
                }
            };
            const currentTheme = document.documentElement.getAttribute('data-theme') || 'light';
            setGiscusTheme(currentTheme);
            new MutationObserver((mutations) => {
                mutations.forEach(mutation => {
                    if (mutation.attributeName === 'data-theme') {
                        setGiscusTheme(mutation.target.getAttribute('data-theme'));
                    }
                });
            }).observe(document.documentElement, { attributes: true });


            
            function initCopyButtons() {
                document.querySelectorAll('pre.chroma').forEach((pre) => {
                    
                    const existingButton = pre.querySelector('.copy-button');
                    if (existingButton) {
                        existingButton.remove();
                    }
                    
                    const button = document.createElement('button');
                    button.className = 'copy-button';
                    button.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>';
                    
                    pre.style.position = 'relative';
                    pre.appendChild(button);
                    
                    button.addEventListener('click', () => {
                        const code = pre.querySelector('code');
                        if (code) {
                            navigator.clipboard.writeText(code.innerText).then(() => {
                                button.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 6L9 17l-5-5"></path></svg>';
                                setTimeout(() => {
                                    button.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>';
                                }, 2000);
                            });
                        }
                    });
                });
            }
            
            
            initCopyButtons();
            
            
            document.addEventListener('themeChanged', () => {
                initCopyButtons();
            });
        });
    </script>
</body>
</html>
    </script>
</body>
</html>