<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é£ä¹¦å¤šç»´è¡¨æ ¼ &#43; Github Action = æ’­å®¢ï¼Ÿ - Leetao</title>
    <meta name="description" content="é€šè¿‡é£ä¹¦å¤šç»´è¡¨æ ¼çš„è‡ªåŠ¨åŒ–å°†æ”¶è—çš„æ–‡ç« å†åŠ å·¥ä¸€æ¬¡ï¼Œå°†æ˜¨å¤©æ”¶è—çš„æ–‡ç« å€Ÿç”± AI å»æ€»ç»“æˆä¸€ä¸ªç®€çŸ­çš„ 5 åˆ†é’Ÿå·¦å³çš„æ–‡ç« ï¼Œ...">
    
    <link rel="icon" href="/favicon.svg" type="image/x-icon">
    
    <link rel="stylesheet" href="/styles/main.css">
    <link rel="stylesheet" href="/styles/chroma.css">
    <link rel="alternate" type="application/rss+xml" href="/rss.xml" title="RSS Feed">
</head>
<body class="container">
    <header class="site-header">
        <div class="site-header__left">
            <a href="/" class="site-title">Leetao</a>
            
            <p class="site-description">å†™æœ‰è¶£çš„ä»£ç ï¼Œåšæœ‰è¶£çš„äº‹</p>
            
        </div>
        <div class="site-header__right">
            <nav class="site-nav">
                <a href="/">Home</a>
                <a href="/tags/">Tags</a>
                <a href="/about/">About</a>
                <button class="theme-toggle" id="theme-toggle">
                    <svg class="theme-icon" viewBox="0 0 24 24" width="16" height="16" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                </button>
            </nav>
        </div>
    </header>
    
    <main>
        <article class="post">
            <header class="post-header">
                <h1 class="post-title">é£ä¹¦å¤šç»´è¡¨æ ¼ &#43; Github Action = æ’­å®¢ï¼Ÿ</h1>
                <p class="post-meta">
                    By LeetaoGoooo on February 22, 2025
                </p>
            </header>
            
            <div class="post-content">
                <p>é€šè¿‡é£ä¹¦å¤šç»´è¡¨æ ¼çš„è‡ªåŠ¨åŒ–å°†æ”¶è—çš„æ–‡ç« å†åŠ å·¥ä¸€æ¬¡ï¼Œå°†æ˜¨å¤©æ”¶è—çš„æ–‡ç« å€Ÿç”± AI å»æ€»ç»“æˆä¸€ä¸ªç®€çŸ­çš„ 5 åˆ†é’Ÿå·¦å³çš„æ–‡ç« ï¼Œç„¶ååŒæ—¶å°†æ€»ç»“çš„æ–‡ç« è½¬æˆè¯­éŸ³çš„å½¢å¼ï¼Œè¿™æ ·å­å°±å¯ä»¥åœ¨ç¢ç‰‡åŒ–çš„æ—¶é—´å°†æ”¶è—çš„æ–‡ç« ç®€å•çš„é€šè¯»ä¸€éäº†ã€‚</p>

<p>æ•´ä½“çš„æµç¨‹å›¾å¦‚ä¸‹ï¼š</p>

<p><img width="1011" alt="é£ä¹¦å¤šç»´è¡¨æ ¼ + Github Action = æ’­å®¢? æµç¨‹å›¾" src="https://github.com/user-attachments/assets/030491e6-1975-4465-9b85-5fb7cdac50bc" /></p>

<p>é€šè¿‡å¤šç»´è¡¨æ ¼å»è§¦å‘ GitHub Action ï¼Œç„¶ååœ¨ GitHub Action é‡Œå®Œæˆæ–‡å­—è½¬è¯­éŸ³çš„æµç¨‹ï¼Œæ¥ç€å°†å®Œæˆçš„éŸ³é¢‘æ–‡ä»¶æ¨é€åˆ°ç¾¤ç»„ä¸­å»ã€‚</p>

<h1 id="å¤šç»´è¡¨æ ¼">å¤šç»´è¡¨æ ¼</h1>

<h2 id="è‡ªåŠ¨åŒ–æµç¨‹">è‡ªåŠ¨åŒ–æµç¨‹</h2>

<p>åœ¨é£ä¹¦çš„å¤šç»´è¡¨æ ¼è‡ªåŠ¨åŒ–æµç¨‹ä¸­å®Œæˆæ•°æ®çš„é¢„å¤„ç†ï¼ŒåŒ…å«å››ä¸ªæ­¥éª¤:</p>

<ol>
<li>å®šæ—¶ä»»åŠ¡ï¼Œæ¯å¤©å®šæ—¶ 8 ç‚¹é’Ÿ</li>
<li>æŸ¥æ‰¾ä¿æŒåœ¨æ•°æ®è¡¨ä¸­ <strong>æ—¥æœŸ == æ˜¨å¤© &amp;&amp; æ˜¯å¦ç”Ÿæˆæ—¥æŠ¥ == âœ…</strong> çš„æ‰€æœ‰<strong>æ€»ç»“</strong></li>
<li>æœ‰è®°å½•åˆ™ç»§ç»­ï¼Œå¦åˆ™åœæ­¢</li>
<li>é€šè¿‡ AI å¯¹æŸ¥æ‰¾åˆ°çš„æ‰€æœ‰è®°å½•æ€»ç»“æˆä¸€ç¯‡æ—¥æŠ¥</li>
<li>å°†æ€»ç»“çš„æ—¥æŠ¥å†…å®¹ <code>News</code> é€šè¿‡ Http çš„è¯·æ±‚æ–¹å¼æ¨é€åˆ° Github Action ä¸‹</li>
</ol>

<h2 id="ai-æ€»ç»“-prompt">AI æ€»ç»“  Prompt</h2>

<p>å…¶ä¸­ 4 ä¸­ä½¿ç”¨åˆ°çš„ <code>prompt</code> å¦‚ä¸‹:</p>
<pre class="chroma"><code><span class="line"><span class="cl"><span class="gh"># è§’è‰²
</span></span></span><span class="line"><span class="cl"><span class="gh"></span>
</span></span><span class="line"><span class="cl">ä½ æ˜¯ä¸€ä½ç»éªŒä¸°å¯Œçš„æŠ€æœ¯é¢†åŸŸæ–‡ç¨¿æ’°å†™äººå‘˜ï¼Œèƒ½å¤Ÿæ ¹æ®ç»™å®šçš„æ€»ç»“ä¿¡æ¯ç”Ÿæˆä¸€ç¯‡æ—¶é•¿åœ¨ 5 åˆ†é’Ÿä¹‹å†…çš„æ–°é—»æ—©æŠ¥æ–‡ç¨¿ã€‚
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="gu">## æŠ€èƒ½
</span></span></span><span class="line"><span class="cl"><span class="gu"></span>
</span></span><span class="line"><span class="cl"><span class="k">6.</span> ç²¾å‡†æç‚¼ç»™å®šæ€»ç»“ä¸­çš„å…³é”®ä¿¡æ¯ã€‚
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">7.</span> å›´ç»•å…³é”®ä¿¡æ¯ç»„ç»‡è¿è´¯ã€ç”ŸåŠ¨ä¸”ç¬¦åˆæ–°é—»æ—©æŠ¥é£æ ¼çš„å†…å®¹ã€‚
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">8.</span> åˆç†æ§åˆ¶æ–‡ç¨¿ç¯‡å¹…ï¼Œç¡®ä¿æ’­æŠ¥æ—¶é•¿åœ¨ 5 åˆ†é’Ÿä¹‹å†…ã€‚
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">9.</span> æŒ‰ç…§ markdown æ ¼å¼æ’°å†™æ–‡ç¨¿ï¼Œå‡†ç¡®å¤„ç†åŸæ–‡é“¾æ¥ã€‚
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="gu">## é™åˆ¶
</span></span></span><span class="line"><span class="cl"><span class="gu"></span>
</span></span><span class="line"><span class="cl"><span class="k">-</span> æ–‡ç¨¿å†…å®¹å¿…é¡»åŸºäºç»™å®šçš„æ€»ç»“ä¿¡æ¯å±•å¼€ã€‚
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">-</span> æ–‡ç¨¿æ’­æŠ¥æ—¶é•¿ä¸¥æ ¼æ§åˆ¶åœ¨ 5 åˆ†é’Ÿä¹‹å†…ã€‚
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">-</span> è¯­è¨€é£æ ¼ç¬¦åˆæ–°é—»æ—©æŠ¥çš„ä¸¥è°¨æ€§å’Œæ—¶æ•ˆæ€§ã€‚
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">-</span> æ–‡ç¨¿æ ¼å¼åº”å½“ä¸º markdown æ ¼å¼
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">-</span> ç¯‡å¹…æ§åˆ¶åœ¨ 1024 ä¸ªå­—ç¬¦ä¹‹å†…ã€‚
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="gu">## ç”¨æˆ·è¦æ±‚
</span></span></span><span class="line"><span class="cl"><span class="gu"></span>
</span></span><span class="line"><span class="cl">è¯·æ ¹æ®ä»¥ä¸‹æ€»ç»“ï¼Œç”Ÿæˆä¸€ç¯‡æ—¶é•¿åœ¨ 5 åˆ†é’Ÿä¹‹å†…çš„æ–°é—»æ—©æŠ¥æ–‡ç¨¿ï¼š
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">[æŸ¥æ‰¾åˆ°çš„æ‰€æœ‰è®°å½•]
</span></span></code></pre>
<h2 id="http-è¯·æ±‚">Http è¯·æ±‚</h2>

<p>å…¶ä¸­ 5 é€šè¿‡ Http è¯·æ±‚è§¦å‘å¯¹åº”çš„ repo çš„ workflowï¼š</p>
<pre class="chroma"><code><span class="line"><span class="cl">curl -X POST <span class="se">\ </span>                     
</span></span><span class="line"><span class="cl">  https://api.github.com/repos/<span class="o">{</span>username<span class="o">}</span>/<span class="o">{</span>repo<span class="o">}</span>/actions/workflows/<span class="o">{</span>workflow-id<span class="o">}</span>/dispatches <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  -H <span class="s2">&#34;Accept: application/vnd.github.v3+json&#34;</span> <span class="se">\
</span></span></span><span class="line"><span class="cl"><span class="se"></span>  -H <span class="s2">&#34;Authorization: Bearer {token}&#34;</span> <span class="se">\ </span><span class="c1"># è‡ªè¡Œç”³è¯·çš„ token</span>
</span></span><span class="line"><span class="cl">  -d <span class="s1">&#39;{
</span></span></span><span class="line"><span class="cl"><span class="s1">    &#34;ref&#34;: &#34;master&#34;, # branch åç§°
</span></span></span><span class="line"><span class="cl"><span class="s1">    &#34;inputs&#34;: {
</span></span></span><span class="line"><span class="cl"><span class="s1">      &#34;news&#34;: &#34;&#34; # æ€»ç»“çš„å†…å®¹
</span></span></span><span class="line"><span class="cl"><span class="s1">    }
</span></span></span><span class="line"><span class="cl"><span class="s1">  }&#39;</span>
</span></span></code></pre>
<p>å…¶ä¸­éœ€è¦è·å–åˆ°å¯¹åº”çš„ workflow idï¼Œå¯ä»¥é€šè¿‡ä¸‹é¢çš„æ–¹å¼è·å–</p>
<pre class="chroma"><code><span class="line"><span class="cl"> curl https://api.github.com/repos/<span class="o">{</span>username<span class="o">}</span>/<span class="o">{</span>repo<span class="o">}</span>/actions/workflows -H <span class="s2">&#34;Authorization: Bearer {token}&#34;</span> <span class="c1"># change to your config</span>
</span></span></code></pre>
<p>æ‰€éœ€çš„ token éœ€è¦ä» <a href="https://github.com/settings/tokens">ğŸ”—</a> ç”³è¯·ï¼Œä¸ºäº†ç¡®ä¿å¯¹åº”çš„ workflow å¯ä»¥æ¥å—å‚æ•°ï¼Œæˆ‘ä»¬ä¹Ÿéœ€è¦å¯¹ä»£ç ä»“åº“ä¸‹çš„ workflow è¿›è¡Œä¿®æ”¹ã€‚</p>

<h1 id="github-action">Github Action</h1>

<h2 id="workflow">workflow</h2>
<pre class="chroma"><code><span class="line"><span class="cl"><span class="nt">on</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="w">  </span><span class="nt">workflow_dispatch</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="w">    </span><span class="nt">inputs</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="w">      </span><span class="nt">news</span><span class="p">:</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="w">        </span><span class="nt">description</span><span class="p">:</span><span class="w"> </span><span class="s1">&#39;Yesterday News Summary&#39;</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">required</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">        </span><span class="nt">type</span><span class="p">:</span><span class="w"> </span><span class="l">string</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="nn">...</span><span class="w">
</span></span></span><span class="line"><span class="cl"><span class="w"></span><span class="l">python what-i-read-yesterday.py &#34;${{ inputs.news }}&#34;</span><span class="w">
</span></span></span></code></pre>
<p>é‡ç‚¹æ˜¯åœ¨ workflow çš„æ–‡ä»¶é‡Œçš„ inputs ä¸‹éœ€è¦æ¥å—çš„å‚æ•°ï¼Œç„¶ååœ¨åç»­é€šè¿‡ <code>${{ inputs.news }}</code> å»ä½¿ç”¨è¿™ä¸ªå‚æ•°äº†ã€‚</p>

<h2 id="tts">tts</h2>

<p>é€šè¿‡ <a href="https://pypi.org/project/edge-tts/">edge-tts</a> è¿™ä¸ªåº“å°†æ–‡å­—è½¬æˆå¯¹åº”çš„éŸ³é¢‘æ–‡ä»¶</p>
<pre class="chroma"><code><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">edge_tts</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">datetime</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">pytz</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">VOICE</span> <span class="o">=</span> <span class="sa"></span><span class="s2">&#34;</span><span class="s2">zh-CN-XiaoxiaoNeural</span><span class="s2">&#34;</span> <span class="c1"># éŸ³è‰²</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">generate_voice</span><span class="p">(</span><span class="n">text</span><span class="p">:</span><span class="nb">str</span><span class="p">)</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">	<span class="o">.</span><span class="o">.</span><span class="o">.</span>
</span></span><span class="line"><span class="cl">	<span class="n">today_voice_path</span> <span class="o">=</span> <span class="sa"></span><span class="s1">&#39;</span><span class="s1">&#39;</span> <span class="c1"># æ–‡ä»¶ä½ç½®</span>
</span></span><span class="line"><span class="cl">	<span class="n">communicate</span> <span class="o">=</span> <span class="n">edge_tts</span><span class="o">.</span><span class="n">Communicate</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">VOICE</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="n">communicate</span><span class="o">.</span><span class="n">save_sync</span><span class="p">(</span><span class="n">today_voice_path</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">	<span class="k">return</span> <span class="n">today_voice_path</span>
</span></span></code></pre>
<h1 id="æœ€å">æœ€å</h1>

<p>æœ€åå°†éŸ³é¢‘æ–‡ä»¶å’Œæ€»ç»“çš„æ–‡å­—å†…å®¹ä¸€èµ·æ¨é€åˆ°ç¾¤ç»„ä¸­å»ã€‚</p>

<p><img width="437" alt="ç¾¤ç»„æ¶ˆæ¯" src="https://github.com/user-attachments/assets/74d4c1fc-d0a4-4b8f-8f8d-d1cb392821ec" /></p>

<p>å®Œæ•´ä»£ç åœ¨: <a href="https://github.com/LeetaoGoooo/discussion-blog">discussion-blog</a></p>

<p>æœ€åéŸ³é¢‘æ–‡ä»¶å’Œæ€»ç»“å¯ä»¥åœ¨ <a href="https://t.me/leetao_space/1261">ç¾¤</a> æˆ–è€… <a href="https://www.xiaoyuzhoufm.com/episode/67b937c305a90dfd0d0fa580">æ’­å®¢</a> é‡Œå¬åˆ°</p>

            </div>
            
            <div class="tag-list">
                
                <a href="/tags/python/" class="tag">python</a>
                
                <a href="/tags/github%20action/" class="tag">github action</a>
                
                <a href="/tags/%e7%a8%8d%e5%90%8e%e9%98%85%e8%af%bb/" class="tag">ç¨åé˜…è¯»</a>
                
                <a href="/tags/tts/" class="tag">tts</a>
                
            </div>
            
            <div class="giscus">
                <script src="https://giscus.app/client.js"
                    data-repo="leetaogoooo/discussion-blog"
                    data-repo-id="R_kgDOIOm9Yg"
                    data-mapping="number"
                    data-term="256"
                    data-reactions-enabled="1"
                    data-emit-metadata="0"
                    data-input-position="top"
                    data-theme="light"
                    data-lang="en"
                    crossorigin="anonymous"
                    async>
                </script>
            </div>
            
        </article>
    </main>
    
    <footer>
        <p>&copy; Leetao. All rights reserved.</p>
    </footer>
    
    <script src="/js/theme-toggle.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            
            const giscusScript = document.querySelector('script[src^="https://giscus.app/client.js"]');
            const setGiscusTheme = (theme) => {
                if (giscusScript) {
                    const message = { setConfig: { theme: theme } };
                    const iframe = document.querySelector('.giscus-frame');
                    if (iframe) {
                        iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
                    }
                }
            };
            const currentTheme = document.documentElement.getAttribute('data-theme') || 'light';
            setGiscusTheme(currentTheme);
            new MutationObserver((mutations) => {
                mutations.forEach(mutation => {
                    if (mutation.attributeName === 'data-theme') {
                        setGiscusTheme(mutation.target.getAttribute('data-theme'));
                    }
                });
            }).observe(document.documentElement, { attributes: true });


            
            function initCopyButtons() {
                document.querySelectorAll('pre.chroma').forEach((pre) => {
                    
                    const existingButton = pre.querySelector('.copy-button');
                    if (existingButton) {
                        existingButton.remove();
                    }
                    
                    const button = document.createElement('button');
                    button.className = 'copy-button';
                    button.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>';
                    
                    pre.style.position = 'relative';
                    pre.appendChild(button);
                    
                    button.addEventListener('click', () => {
                        const code = pre.querySelector('code');
                        if (code) {
                            navigator.clipboard.writeText(code.innerText).then(() => {
                                button.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 6L9 17l-5-5"></path></svg>';
                                setTimeout(() => {
                                    button.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>';
                                }, 2000);
                            });
                        }
                    });
                });
                const button = document.createElement('button');
                button.className = 'copy-button';
                button.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>';
                
                pre.style.position = 'relative';
                pre.appendChild(button);
                
                button.addEventListener('click', () => {
                    const code = pre.querySelector('code');
                    if (code) {
                        navigator.clipboard.writeText(code.innerText).then(() => {
                            button.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 6L9 17l-5-5"></path></svg>';
                            setTimeout(() => {
                                button.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>';
                            }, 2000);
                        });
                    }
                });
            }
            
            
            initCopyButtons();
            
            
            document.addEventListener('themeChanged', () => {
                initCopyButtons();
            });
        });
    </script>
</body>
</html>